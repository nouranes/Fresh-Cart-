<!-- allorders.component.html -->
<section class="flex flex-col items-center justify-center min-h-screen container w-10/12 mx-auto p-5">

  @if (ordersData.length > 0) {
    <h2 class="text-3xl font-light my-5">Your <span class="main-color">Orders</span></h2>
    @for (order of ordersData; track $index) {
      
      <div class="bg-main-light rounded-xl shadow-md w-full p-6 mb-6">
        <h2 class="text-2xl font-light mb-4 text-center">Order {{$index + 1}}</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <p class="mb-2"><span class="font-semibold main-color">Status:</span>
              <span class="{{ order.isDelivered ? 'main-color' : 'text-red-600' }} ml-2">
                {{ order.isDelivered ? 'Delivered' : 'Not Delivered' }}
              </span>
            </p>
            <p class="mb-2"><span class="font-semibold main-color">Payment:</span>
              <span class="{{ order.isPaid ? '' : 'text-red-600' }} ml-2">
                {{ order.isPaid ? 'Paid' : 'Not Paid' }}
              </span>
            </p>
            <p class="mb-2"><span class="font-semibold main-color">Total Price:</span> 
              <span class="font-medium">{{ order.totalOrderPrice }} EGP</span>
            </p>
            
          </div>

          <!-- Shipping Info -->
          <div class=" rounded">
            
            <p class="text-sm my-1"> <span class="font-semibold main-color">Details : </span> {{ order.shippingAddress.details }}</p>
            <p class="text-sm my-1"><span class="font-semibold main-color">City : </span>{{ order.shippingAddress.city }}</p>
            <p class="text-sm my-1"><span class="font-semibold main-color">Phone: </span>{{ order.shippingAddress.phone }}</p>
          </div>
        </div>

        <h4 class="text-md font-medium text-gray-700 mb-3">Order Items:</h4>
        <ul class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          @for (item of order.cartItems; track $index) {
            <li class="flex items-start gap-4 p-4 rounded-lg border border-gray-100">
              <img [src]="item.product.imageCover" alt="Product Image" class="w-20 h-20 rounded object-cover">
              <div>
                <p class="font-semibold main-color mb-1">{{ item.product.title }}</p>
                <p class="text-sm my-1">Brand: <span class="font-medium">{{ item.product.brand?.name || 'N/A' }}</span></p>
                <p class="text-sm my-1">Category: <span class="font-medium">{{ item.product.category?.name || 'N/A' }}</span></p>
                <p class="text-sm my-1">Price: <span class="font-medium">{{ item.price }} EGP</span></p>
                <p class="text-sm my-1">Quantity: <span class="font-medium">{{ item.count }}</span></p>
              </div>
            </li>
          }
        </ul>
      </div>
    }
  } 
  
 
  @else {
    <p class="text-gray-500 text-lg">No orders found.</p>
  }
</section>